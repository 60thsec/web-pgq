<!DOCTYPE html>
<!--[if lt IE 7]>      <html ng-app="webPGQ" ng-controller="MainController" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html ng-app="webPGQ" ng-controller="MainController" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html ng-app="webPGQ" ng-controller="MainController" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html ng-app="webPGQ" ng-controller="MainController" class="no-js"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title ng-bind="currentConnection ? 'web-pgq [' + currentConnection + ']' : 'web-pgq - a PostgreSQL query tool'">web-pgq - a PostgreSQL query tool</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!--[if lt IE 9]>
			<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
			<script>window.html5 || document.write('<script src="js/vendor/html5shiv.js"><\/script>')</script>
		<![endif]-->

		<!--
		==================
		==== CDN libs ====
		-->

		<!-- Non-minified -->
		<!--
		<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700" type="text/css">

		<script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.js"></script>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.js"></script>
		<script>window.jQuery || document.write('<script src="js/vendor/jquery-2.0.3.min.js"><\/script>')</script>

		<script src="http://d3js.org/d3.v3.js"></script>
		<script src="http://cpettitt.github.io/project/dagre-d3/v0.2.9/dagre-d3.js"></script>

		<link rel="stylesheet" href="perfect-scrollbar/src/perfect-scrollbar.css">
		<script src="perfect-scrollbar/src/perfect-scrollbar.js"></script>
		-->

		<!-- Minified -->
		<!--
		<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700" type="text/css">

		<script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
		<script>window.jQuery || document.write('<script src="js/vendor/jquery-2.0.3.min.js"><\/script>')</script>

		<script src="http://d3js.org/d3.v3.min.js"></script>
		<script src="http://cpettitt.github.io/project/dagre-d3/v0.2.9/dagre-d3.min.js"></script>

		<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.5.3/perfect-scrollbar.min.css">
		<script src="//cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.5.3/perfect-scrollbar.min.js"></script>
		-->

		<!-- Local copy (offline) -->
		<link rel="stylesheet" href="css/vendor/SourceSansPro-OpenSans-fonts.css">

		<script src="lodash/lodash.min.js"></script>

		<script src="js/vendor/jquery-2.0.3.min.js"></script>

		<script src="js/vendor/d3.v3.min.js"></script>
		<script src="js/vendor/dagre-d3.min.js"></script>

		<link rel="stylesheet" href="perfect-scrollbar/min/perfect-scrollbar.min.css">
		<script src="perfect-scrollbar/min/perfect-scrollbar.min.js"></script>


		<!--
		============================================
		==== Non-CDN (bower or local-only) libs ====
		-->

		<!-- Non-minified -->
		<link rel="stylesheet" href="semantic-ui/dist/semantic.css">
		<script src="semantic-ui/dist/semantic.js"></script>

		<script src="js/vendor/unisocket.js"></script>

		<script src="angular/angular.js"></script>
		<script src="angular-animate/angular-animate.js"></script>
		<script src="angular-cookies/angular-cookies.js"></script>
		<script src="angular-sanitize/angular-sanitize.js"></script>

		<script src="ace-builds/src-noconflict/ace.js"></script>
		<script src="ace-builds/src-noconflict/ext-language_tools.js"></script>
		<script src="angular-ui-ace/ui-ace.js"></script>

		<script src="angular-tiny-eventemitter/dist/angular-tiny-eventemitter.js"></script>

		<link rel="stylesheet" href="openlayers3/build/ol.css">
		<script src="openlayers3/build/ol.js"></script>
		<script src="angular-openlayers-directive/dist/angular-openlayers-directive.js"></script>

		<link rel="stylesheet" href="bg-splitter/css/style.css">
		<script src="bg-splitter/js/splitter.js"></script>

		<link rel="stylesheet" href="highlightjs/styles/railscasts.css">
		<script src="highlightjs/highlight.pack.js"></script>

		<!-- Minified -->
		<!--
		<link rel="stylesheet" href="semantic-ui/dist/semantic.min.css">
		<script src="semantic-ui/dist/semantic.min.js"></script>

		<script src="js/vendor/unisocket.js"></script>

		<script src="angular/angular.min.js"></script>
		<script src="angular-animate/angular-animate.min.js"></script>
		<script src="angular-cookies/angular-cookies.min.js"></script>

		<script src="ace-builds/src-min-noconflict/ace.js"></script>
		<script src="ace-builds/src-min-noconflict/ext-language_tools.js"></script>
		<script src="angular-ui-ace/ui-ace.min.js"></script>

		<script src="angular-tiny-eventemitter/dist/angular-tiny-eventemitter.min.js"></script>

		<link rel="stylesheet" href="css/vendor/ol.css">
		<script src="js/vendor/ol.js"></script>
		<script src="angular-openlayers-directive/dist/angular-openlayers-directive.min.js"></script>
		-->


		<!--
		===============================
		==== Application resources ====
		-->

		<link rel="stylesheet" href="css/main.css">
		<link rel="stylesheet" href="css/animations.css">

		<script src="js/modules.js"></script>

		<script src="js/directives/digraph.js"></script>
		<script src="js/directives/result-value.js"></script>
		<script src="js/directives/open-file.js"></script>
		<script src="js/directives/save-file.js"></script>
		<script src="js/directives/sticky.js"></script>

		<script src="js/filters/capitalize.js"></script>

		<script src="js/services/await.js"></script>
		<script src="js/services/promise.js"></script>
		<script src="js/services/queue-digest.js"></script>
		<script src="js/services/graph.js"></script>
		<script src="js/services/keybinding.js"></script>
		<script src="js/services/logger.js"></script>
		<script src="js/services/socket.js"></script>
		<script src="js/services/sql.js"></script>

		<script src="js/main.js"></script>
	</head>

	<body>
		<!--[if lt IE 7]>
			<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
		<![endif]-->

		<div class="ui page dimmer active" ng-if="!pageLoaded">
			<div class="ui text loader">Loading</div>
		</div>

		<bg-splitter orientation="horizontal">
			<bg-pane min-size="128" id="topPane">
				<bg-splitter id="editorArea" pos="75%" orientation="vertical">
					<bg-pane id="editor" min-size="128" class="inverted ui segment">
						<div ui-ace="mainEditorConfig" ng-model="query.text"></div>
						<div class="hiding bottom right attached ui labels">
							<div class="small compact ui label" ng-if="editor.overwrite">
								<div class="middle detail">OVR</div>
							</div>
							<div class="small compact ui label">
								row <div class="detail">{{ editor.pos.row }}</div>
								/ <div class="middle detail">{{ editor.rows }}</div>
							</div>
							<div class="small compact ui label">
								column <div class="detail">{{ editor.pos.column }}</div>
							</div>
						</div>
					</bg-pane>

					<bg-pane id="querySidebar" min-size="286" ng-class="{active: showQuerySidebar}">
						<div class="compact tiny 3 attached ui buttons">
							<div class="orange labeled icon ui button" ng-click="newFile()">
								<i class="file icon"></i>
								New
							</div>

							<save-file ng-model="query.text" file-name="query.fileName"></save-file>

							<open-file on-open="fileLoaded(file, content)"></open-file>
						</div>

						<div id="paramsSection" class="secondary attached inverted ui segment">
							<table id="paramsGrid">
								<caption>Parameters:</caption>
								<thead>
									<tr>
										<th>#</th>
										<th colspan="2">Value / Type</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-cloak ng-repeat="param in query.params track by $index">
										<td class="right aligned"><code>${{ $index + 1 }}</code></td>
										<td class="right aligned">
											<div class="fluid mini ui input"
													ng-class="{right: param.type != 'null', labeled: param.type != 'null'}">

												<input type="text" placeholder="Value" id="queryParam_{{ $index + 1 }}"
													class="fade" ng-model="param.value" ng-if="param.type != 'null'">

												<div class="small upward dropdown ui label" ng-class="{fluid: param.type == 'null'}">
													{{ displayQueryParamType(param.type) }}
													<i class="dropdown icon"></i>
													<div class="menu">
														<div class="item" ng-click="param.type = 'text'">Text</div>
														<div class="item" ng-click="param.type = 'integer'">Integer</div>
														<div class="item" ng-click="param.type = 'null'">NULL</div>
													</div>
												</div>
											</div>
										</td>
										<td>
											<div class="compact mini red icon ui button" ng-click="removeQueryParam($index)">
												<i class="close ui icon"></i>
											</div>
										</td>
									</tr>
								</tbody>
							</table>
							<div class="bottom attached mini teal labeled icon ui button" ng-click="addQueryParam()">
								<i class="add icon"></i>
								Add parameter
							</div>

							<div class="launch button wrapper">
								<div class="small black icon launch ui button" ng-click="showQuerySidebar = !showQuerySidebar">
									<!--i class="menu icon"></i-->
									<i class="list layout icon"></i>
								</div>
							</div>
						</div>
					</bg-pane>
				</bg-splitter>

				<div id="mainMenu" class="transparent small inverted attached compact main ui menu">
					<div class="header item">
						<i class="database icon"></i>
						<b class="hide on mobile">web-pgq</b>
					</div>
					<!--div class="text item">
						Put in a query. Hit run or explain. Done.
					</div-->
					<div class="ui upward dropdown item" ng-class="{disabled: !connected || query.running}">
						<span ng-if="!currentConnection" class="value placeholder">Connect to...</span>

						<span ng-cloak ng-if="currentConnection" class="value"
								ng-class="{teal: dbConnected, yellow: connected && dbConnecting, red: connected && !dbConnecting && !dbConnected}">
							<i ng-if="connected && !dbConnecting && !dbConnected" class="attention icon" title="Disconnected from chosen database!"></i>
							<i ng-if="!connected" class="red attention icon" title="Disconnected from web-pgq server!"></i>
							{{ currentConnection }}
						</span>

						<i class="dropdown icon"></i>

						<div class="menu">
							<div class="header">
								<i class="plug icon"></i>
								Connections
							</div>
							<div class="divider"></div>

							<div class="two button item" ng-repeat="(name, conn) in connections" ng-click="connectDB(name)"
									title="{{ conn.masked|json }}">
								<div class="right compact mini icon ui buttons">
									<div class="red ui button" title="Remove connection" ng-click="showRemoveConnection(name, $event)">
										<i class="remove icon"></i>
									</div>
									<div class="teal ui button" title="Edit connection" ng-click="editConnection(name, $event)">
										<i class="write icon"></i>
									</div>
								</div>
								{{ name }}
							</div>

							<div class="divider"></div>
							<div class="item" ng-click="addConnection()">
								<i class="add sign box icon"></i>
								Add new connection...
							</div>
						</div>
					</div>
					<div class="item" ng-show="connecting" ng-click="connectSocket()"
							data-content="Click to force reconnect.">
						<i class="spinner loading icon"></i>
						<span class="hide on mobile">Connecting...</span>
					</div>
					<div class="item" ng-show="dbConnecting">
						<i class="spinner loading icon"></i>
						<span class="hide on mobile">Connecting to {{ currentConnection }}...</span>
					</div>

					<div id="removeConnectionModal" class="ui basic modal">
						<div class="header">Remove connection</div>
						<div class="content">
							<div class="image">
								<i class="red trash icon"></i>
							</div>
							<div class="description">
								<p>Are you sure you want to <strong>permanently delete</strong> the connection
									{{ connectionToRemove|json }}?</p>
							</div>
						</div>
						<div class="actions">
							<div class="two fluid ui inverted buttons">
								<div class="ui red basic inverted button" ng-click="removeConnection()">
									<i class="checkmark icon"></i>
									Yes, <strong>delete</strong> it.
								</div>
								<div class="ui blue basic inverted button">
									<i class="remove icon"></i>
									No, keep it!
								</div>
							</div>
						</div>
					</div>

					<div id="editConnectionDimmer" class="ui page dimmer">
						<div class="content">
							<div class="center">
								<div class="inverted small ui form segment" ng-class="{error: editConnectionError}">
									<h2 ng-show="editingConnection.isNew">Add Connection</h2>
									<h2 ng-show="!editingConnection.isNew">Edit Connection {{ editingConnection.name|json }}</h2>

									<div class="inline field">
										<label>Connection Name</label>
										<input type="text" ng-model="editingConnection.newName" name="connectionName">
									</div>

									<div class="two fields">
										<div class="field">
											<label>Server</label>
											<input placeholder="hostname" type="text" ng-model="editingConnection.info.host">
										</div>
										<div class="field">
											<label>&nbsp;</label>
											<input placeholder="port" type="text" autocomplete="off" ng-model="editingConnection.info.port">
										</div>
									</div>

									<div class="two fields">
										<div class="field">
											<label>Database Name</label>
											<input type="text" ng-model="editingConnection.info.database">
										</div>
										<div class="inline field">
											<div class="toggle ui checkbox">
												<input type="checkbox" ng-model="editingConnection.info.ssl">
												<label for="terms">Use SSL</label>
											</div>
										</div>
									</div>

									<div class="two fields">
										<div class="field">
											<label>Username</label>
											<div class="ui left labeled icon input">
												<input type="text" ng-model="editingConnection.info.user">
												<i class="user icon"></i>
											</div>
										</div>
										<div class="field">
											<label>Password</label>
											<input type="password" autocomplete="off" ng-model="editingConnection.info.password">
										</div>
									</div>

									<div class="actions">
										<div class="negative ui button" ng-click="hideEditConnection()">Cancel</div>
										<div class="positive icon ui button" ng-show="editingConnection.isNew"
												ng-click="saveConnection()" ng-class="{disabled: !editingConnection.isValid}">
											Add Connection
											<i class="add icon"></i>
										</div>
										<div class="positive icon ui button" ng-show="!editingConnection.isNew"
												ng-click="saveConnection()" ng-class="{disabled: !editingConnection.isValid}">
											Save Connection
											<i class="save icon"></i>
										</div>
									</div>

									<div class="ui error message"></div>
									<div class="ui error message" ng-if="editConnectionError">{{ editConnectionError }}</div>
								</div>
							</div>
						</div>
					</div>

					<div class="borderless right fitted item hide on mobile">
						<div class="horizontally fitted borderless item compact ui buttons">
							<a class="fast fade animation red vertical animated ui button" data-content="Cancel query"
									ng-if="query.running" ng-click="cancelQuery()">
								<div class="hidden content">Cancel</div>
								<div class="visible content"><i class="spinner loading icon"></i></div>
							</a>
						</div>

						<div class="item compact ui buttons">
							<a class="teal labeled icon ui button" ng-click="runQuery()"
									ng-class="{disabled: !dbConnected || query.running}" data-html="Shortcut: <b>F5</b>">
								<i class="play icon"></i>
								Run
							</a>
							<a class="teal labeled icon ui button" ng-click="testQuery()"
									ng-class="{disabled: !dbConnected || query.running}" data-html="Shortcut: <b>Shift+F5</b>">
								<i class="lab icon"></i>
								Test
							</a>
						</div>

						<div class="horizontally fitted borderless item compact ui buttons">
							<a class="orange labeled icon ui button" ng-click="explainQuery()"
									ng-class="{disabled: !dbConnected || query.running}" data-html="Shortcut: <b>F7</b>">
								<i class="question icon"></i>
								Explain
							</a>
							<a class="orange labeled icon ui button" ng-click="explainQuery(true)"
									ng-class="{disabled: !dbConnected || query.running}" data-html="Shortcut: <b>Shift+F7</b>">
								<i class="treatment icon"></i>
								Analyze
							</a>
						</div>

						<div class="borderless item compact ui buttons">
							<div class="ui upward dropdown orange icon ui button">
								<i class="settings icon"></i>

								<div class="menu">
									<div class="header">
										<i class="settings icon"></i>
										EXPLAIN settings
									</div>
									<div class="divider"></div>

									<a class="item" ng-repeat="(key, val) in explainOptions" ng-click="val.enabled = !val.enabled"
											ng-class="{active: val.enabled, teal: val.enabled}" data-content="{{ val.description }}">
										<i class="left icon" ng-class="val.icon"></i>
										{{ key }}
										<div class="squarish right ui label" ng-class="{teal: val.enabled}">
											<i class="icon" ng-class="{disabled: !val.enabled, checkmark: val.enabled}"></i>
										</div>
									</a>
								</div>
							</div>
						</div>
					</div>

					<div class="borderless right fitted item show on mobile">
						<div class="horizontally fitted borderless item compact ui buttons">
							<a class="fast fade animation red vertical animated ui button" data-content="Cancel query"
									ng-if="query.running" ng-click="cancelQuery()">
								<div class="hidden content">Cancel</div>
								<div class="visible content"><i class="spinner loading icon"></i></div>
							</a>
						</div>

						<div class="item compact ui buttons">
							<a class="teal icon vertical animated ui button" ng-click="runQuery()"
									ng-class="{disabled: !dbConnected || query.running}" data-html="Shortcut: <b>F5</b>">
								<div class="hidden content">Run</div>
								<div class="visible content"><i class="play icon"></i></div>
							</a>
						</div>

						<div class="horizontally fitted borderless item compact ui buttons">
							<a class="orange vertical animated ui button" ng-click="explainQuery()"
									ng-class="{disabled: !dbConnected || query.running}" data-html="Shortcut: <b>F7</b>">
								<div class="hidden content">Explain</div>
								<div class="visible content"><i class="question icon"></i></div>
							</a>
							<a class="orange vertical animated ui button" ng-click="explainQuery(true)"
									ng-class="{disabled: !dbConnected || query.running}" data-html="Shortcut: <b>Shift+F7</b>">
								<div class="hidden content">Analyze</div>
								<div class="visible content"><i class="treatment icon"></i></div>
							</a>
						</div>

						<div class="borderless item compact ui buttons">
							<a id="settings-button" class="orange icon ui button">
								<i class="settings icon"></i>
							</a>
							<div id="settings-popup" class="popup vertical ui menu">
								<div class="header item">EXPLAIN settings</div>
								<a class="item" ng-repeat="(key, val) in explainOptions" ng-click="val.enabled = !val.enabled"
										ng-class="{active: val.enabled, teal: val.enabled}" data-content="{{ val.description }}">
									<i class="left icon" ng-class="val.icon"></i>
									{{ key }}
									<div class="squarish ui label" ng-class="{teal: val.enabled}">
										<i class="icon" ng-class="{disabled: !val.enabled, checkmark: val.enabled}"></i>
									</div>
								</a>
							</div>
						</div>
					</div>
				</div>

				<div id="copyright">
					&copy; 2014 David H. Bronke
				</div>
			</bg-pane>

			<bg-pane min-size="128" id="bottomPane"><div id="resultsArea">
				<div class="transparent top attached small tabular ui menu">
					<a class="item" ng-class="{active: (resultsTab == 'Results')}" ng-click="showResults()">
						<i class="table icon"></i>
						Results
					</a>
					<a class="item" ng-class="{active: (resultsTab == 'Geometry')}" ng-click="showGeometry()">
						<i class="map icon" ng-class="{loading: geometryLoading}"></i>
						Geometry
					</a>
					<a class="item" ng-class="{active: (resultsTab == 'Query Plan')}" ng-click="showPlan()">
						<i class="sitemap icon"></i>
						Query Plan
					</a>
					<a class="item" ng-class="{active: (resultsTab == 'Messages')}" ng-click="showMessages()">
						<i class="browser icon"></i>
						Messages
					</a>
				</div>

				<div id="resultsTabs" class="dimmable attached ui segment">

					<div class="ui dimmer" ng-class="{active: (resultsTab == 'Query Plan')}" id="plan-diagram-dimmer">
						<div class="top left attached ui labels">
							<a class="small compact squarish green ui label" data-content="Zoom to fit"
									ng-click="zoomFit()">
								<i class="maximize icon"></i>
							</a>
							<a class="small compact teal dropdown ui label">
								<span>Line width:</span>
								<span class="detail" ng-class="{fallback: lineWidthKey != selectedLineWidthKey}">{{ lineWidthKey }}</span>

								<i class="dropdown icon"></i>
								<div class="menu">
									<div class="item" ng-repeat="planKey in groupedPlanKeys"
											ng-class="{active: selectedLineWidthKey == planKey || contains(planKey.keys, selectedLineWidthKey)}"
											ng-click="setLineWidthKey(planKey)">
										<i ng-if="planKey.keys" class="dropdown icon"></i>
										<span>{{ planKey.title || planKey }}</span>

										<div class="menu" ng-if="planKey.keys">
											<div class="item" ng-repeat="groupedPlanKey in planKey.keys"
													ng-class="{active: selectedLineWidthKey == groupedPlanKey}"
													ng-click="setLineWidthKey(groupedPlanKey)">
												{{ groupedPlanKey }}
											</div>
										</div>
									</div>
								</div>

								<span ng-show="graph.edgeLabelLegend" class="edgeLabelLegend fade animation">Labels:
										<em>{{ graph.edgeLabelLegend }}</em></span>
							</a>
						</div>

						<div class="content">
							<svg digraph graph="graph" class="fill-parent">
								<defs>
									<g ng-repeat="node in graphNodes" id="{{ node.useDef }}">
										<image xlink:href="{{ node.iconURL }}" x="-32" y="-32" width="64px" height="64px"></image>
									</g>
								</defs>
							</svg>
						</div>
					</div>

					<div id="geometry-map" ng-class="{visible: resultsTab == 'Geometry'}">
						<div class="top left attached ui labels">
							<div id="layers-button" class="green dropdown ui label">
								Layers
								<i class="dropdown icon"></i>

								<div id="layers-dropdown" class="small vertical menu">
									<a class="item" ng-repeat="layer in availableLayers"
											ng-click="eatEvent($event, toggleMapLayer, layer)"
											ng-class="{active: layer.active, teal: layer.active}">

										<i class="color icon" ng-if="layer.htmlColor" ng-style="{'background-color': layer.htmlColor}"></i>
										{{ layer.display || layer.name }}
										<em ng-if="layer.queryID">(query # {{layer.queryID}})</em>

										<div class="squarish check ui label" ng-class="{teal: val.enabled}">
											<i class="icon" ng-class="{disabled: !layer.active, checkmark: layer.active}"></i>
										</div>

										<div class="squarish teal clickable ui label" ng-class="{disabled: !layer.hasExtent}"
												title="Zoom to fit" ng-click="eatEvent($event, centerMapLayer, layer)">
											<i class="left map icon"></i>
										</div>
									</a>
								</div>
							</div>
						</div>

						<openlayers layers="defaultLayers" center="geomMapCenter">
						</openlayers>
					</div>

					<div class="ui dimmer" ng-class="{active: (resultsTab == 'Messages')}" id="messages-dimmer">
						<div class="top right attached ui labels">
							<a class="small compact squarish ui label" ng-class="{black: logger.showBannersFor.debug}"
									ng-click="logger.showBannersFor.debug = !logger.showBannersFor.debug">
								<i class="bug icon" ng-class="{black: !logger.showBannersFor.debug, disabled: !logger.showBannersFor.debug}"></i>
							</a>
							<a class="small compact squarish ui label" ng-class="{teal: logger.showBannersFor.info}"
									ng-click="logger.showBannersFor.info = !logger.showBannersFor.info">
								<i class="info letter icon" ng-class="{teal: !logger.showBannersFor.info, disabled: !logger.showBannersFor.info}"></i>
							</a>
							<a class="small compact squarish ui label" ng-class="{green: logger.showBannersFor.success}"
									ng-click="logger.showBannersFor.success = !logger.showBannersFor.success">
								<i class="checkmark icon" ng-class="{green: !logger.showBannersFor.success, disabled: !logger.showBannersFor.success}"></i>
							</a>
							<a class="small compact squarish ui label" ng-class="{yellow: logger.showBannersFor.warning}"
									ng-click="logger.showBannersFor.warning = !logger.showBannersFor.warning">
								<i class="warning sign icon" ng-class="{yellow: !logger.showBannersFor.warning, disabled: !logger.showBannersFor.warning}"></i>
							</a>
							<a class="small compact squarish ui label" ng-class="{red: logger.showBannersFor.error}"
									ng-click="logger.showBannersFor.error = !logger.showBannersFor.error">
								<i class="remove circle icon" ng-class="{red: !logger.showBannersFor.error, disabled: !logger.showBannersFor.error}"></i>
							</a>
						</div>

						<div class="left aligned inverted content">
							<section>
								<div class="fade slide animation small icon ui message" ng-class="banner.severity"
										ng-repeat="(idx, banner) in logger.bannerMessages">
									<i class="icon" ng-class="banner.icon"></i>
									<div class="mini floating ui label">
										{{ banner.time | date:"h:mm a" }}
										<div class="detail">{{ banner.time | date:"M/d/y" }}</div>
									</div>
									<div class="content">
										<div class="header">
											{{ banner.header }}
										</div>
										<div class="ui accordion" ng-if="banner.detail">
											<strong class="title"><i class="dropdown icon"></i>Details &#x2026;</strong>
											<pre class="content" ng-if="banner.detailType == 'string'"><code>{{ banner.detail }}</code></pre>
											<ul class="content list" ng-if="banner.detailType != 'string'">
												<li ng-repeat="(key, val) in banner.detail"
														ng-class="{ui: isMultiLineString(val), accordion: isMultiLineString(val)}">

													<strong ng-if="!isMultiLineString(val)">{{ key }}:</strong>
													<strong class="title" ng-if="isMultiLineString(val)">{{ key }} &#x2026;</strong>

													<pre ng-if="!isString(val)" ng-class="{content: isMultiLineString(val)}"><code>{{ val|json }}</code></pre>
													<pre ng-if="isString(val)" ng-class="{content: isMultiLineString(val)}"><code>{{ val }}</code></pre>
												</li>
											</ul>
										</div>
									</div>
								</div>
							</section>
						</div>
					</div>

					<div id="resultsContainer">
						<div class="padding">
							<div ng-repeat="resultSet in resultSets track by $index" class="resultSet">

								<sticky context="#resultsContainer" scrollContext="#resultsContainer" class="small dividing ui header">
									Result Set {{ $index + 1 }} / {{ resultSets.length }}

									<div class="tiny right floated ui header">
										<div class="small compact ui label">
											Rows <div class="detail">{{ resultSet.rowCount || 0 }}</div>
										</div>
										<div class="small compact ui label" ng-if="resultSet && resultSet.affectedRowCount">
											Affected <div class="detail">{{ resultSet.affectedRowCount }}</div>
										</div>
										<div class="small compact ui label" ng-if="resultSet && resultSet.totalTimeMS">
											<div class="left detail">{{ resultSet.totalTimeMS }}</div> <span>ms</span>
										</div>
									</div>
								</sticky>

								<div ng-if="!query.running && resultSet.rows.length == 0 && resultsTab == 'Results'"
										class="fast fade animation red ribbon ui label">
									No rows returned.
								</div>

								<table ng-if="resultSet.rows.length > 0"
										class="fade animation compact collapsing celled bottom attached ui table">

									<thead>
										<tr>
											<th ng-repeat="field in resultSet.fields track by $index"
												title="Data Type: {{ field.dataType }}">{{ field.name }}</th>
										</tr>
									</thead>

									<tbody>
										<!--tr ng-repeat="row in resultSet.rows track by $index" class="fade animation">
											<td ng-repeat="value in row track by $index"
												result-value="value" result-field-type="resultSet.fields[$index].dataType"
												ace-config="commonEditorConfig">
											</td>
										</tr-->
										<tr ng-repeat="row in resultSet.rows track by $index">
											<td ng-repeat="value in row track by $index"
												result-value="value" result-field-type="resultSet.fields[$index].dataType">
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>

					<div class="hiding bottom right attached ui labels" ng-class="{black: resultsTab == 'Messages'}">
						<div class="small compact ui label" ng-if="resultSets && resultSets.status">
							{{ resultSets.status|capitalizeWords }}
						</div>
						<div class="small compact ui label">
							Statements <div class="detail">{{ resultSets.length || 0 }}</div>
						</div>
						<div class="small compact ui label">
							Total Rows <div class="detail">{{ resultSets.totalRows || 0 }}</div>
						</div>
						<div class="small compact ui label" ng-if="resultSets && resultSets.totalRowsAffected">
							Total Affected <div class="detail">{{ resultSets.totalRowsAffected }}</div>
						</div>
						<div class="small compact ui label" ng-if="resultSets && resultSets.totalTimeMS">
							<div class="left detail">{{ resultSets.totalTimeMS }}</div> ms
						</div>
					</div>
				</div>
			</div></bg-pane>
		</bg-splitter>
	</body>
</html>
